/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>
#include "stm32_f446xx.h"

void delay_ms(uint32_t ms)
{
    uint32_t count = ms * 27000;  // calibrated for ~1ms at 180 MHz
    while(count--) {
        __asm__("nop");           // ensures stable timing
    }
}

int main(void)
{
	GPIOA_CLK_EN();						//Enable GPIOA Clock
	GPIOA->MODER &= ~(0x3 << 10);		//Make 1011 Position Zero
	GPIOA->MODER |= (1<<10);			//Set PA5 as output (10 == output mode)
	GPIOA->OTYPER &= ~(1<<5);			//Clearing Bit 5 Makes Pin 5 Push-pull (standard LED Drive)
	GPIOA->OSPEEDR &= ~(0x3 << 10);
	GPIOA->OSPEEDR |= (1<<10);			//Medium Speed
	GPIOA->PUPDR &= ~(0x3 << 10);		//No Pull-up and Pull-down


	while(1)
	{
		GPIOA->ODR ^= (1<<5);			//Toggle LED
		delay_ms(5000);					//Wait 10 seconds
	}
}
